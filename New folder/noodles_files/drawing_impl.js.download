google.maps.__gjsload__('drawing_impl', function(_){var h7,j7=function(a,b){function c(f,g,h,k){var l=_.ko("div",a);_.OM(l,"left");l.style.lineHeight="0";g={title:g,sg:h,Lh:k,padding:[4],ah:!0,kj:!0};h=_.ko("span");h.style.display="inline-block";var m=f||"hand",p=ija[m],q=_.ZJ(d,h,new _.N(0,p),i7);q.style.position="relative";var u=_.jO(l,h,f,g);_.L.addListener(u,"active_changed",function(){var t=u.get("active")?jja[m]:p;_.$J(q,i7,new _.N(0,t))});u.bindTo("value",e,"drawingMode")}var d=_.Xo("drawing"),e=this;c(null,"Stop drawing",!0,!b.length);_.A(b,
function(f,g){var h=kja[f];h&&c(f,h,!1,g==b.length-1)})},k7=function(){},l7=function(a,b,c){this.T=a;this.W=b;this.$=c},m7=function(a){if(!a.i){var b={};_.Ud(b,a.get("options"));null==b.zIndex&&(b.zIndex=a.$());delete b.map;a.i=a.T.j(b)}},n7=function(a,b,c){a.i&&(a.j&&a.o?(a.i.get("map")||a.i.bindTo("map",a),a.T.i(a.i,a.j,b,c.i<a.o.i)):a.T.i(a.i,b))},o7=function(a,b,c){n7(a,b,c);b=a.i.get("map");c=a.i;c.unbind("map");a.i=null;_.L.trigger(a,"overlaycomplete",{type:a.T.H(),overlay:c});_.L.trigger(a,
a.T.o(),c);_.og(b,"DMsim");a.j=null;a.o=null;a.H=!1},p7=function(){},q7=function(a){this.j=a;this.i=null},r7=function(a){if(!a.i){var b={};_.Ud(b,a.get("options"));delete b.map;a.i=new _.Sg(b)}},s7=function(a,b,c,d){this.o=a;this.j=b;this.T=c;this.H=d+1E-6;this.i=null;this.ka=new _.N(0,0);this.W=new _.N(0,0);this.$=new _.N(0,0)},t7=function(a,b){a.i.Nd.getPath().push(b);a.i.sd.set("anchors",[b])},w7=function(a,b){var c=u7(a,b);c?(a.o||2!=c.type||t7(a,c.latLng),v7(a)):t7(a,b)},u7=function(a,b){var c=
a.i.Nd.getPath(),d=c.getLength();if(d){var e=a.get("map"),f=e.get("projection");e=e.__gm.get("zoom");e=a.H/(1<<e);var g=f.fromLatLngToPoint(b,a.ka);b=b.lng();d=c.getAt(d-1);var h=new _.I(d.lat(),_.Wd(d.lng(),b-180,b+180),!0);h=f.fromLatLngToPoint(h,a.W);if(Math.abs(g.x-h.x)<=e&&Math.abs(g.y-h.y)<=e)return{type:1,latLng:d};c=c.getAt(0);b=new _.I(c.lat(),_.Wd(c.lng(),b-180,b+180),!0);a=f.fromLatLngToPoint(b,a.$);if(Math.abs(g.x-a.x)<=e&&Math.abs(g.y-a.y)<=e)return{type:2,latLng:c}}return null},y7=function(a){var b=
a.get("options"),c=new _.M;c.setValues(b);var d=new _.hM(c,a.o);c={};_.Ud(c,b);c.strokeColor=d.get("strokeColor");c.strokeOpacity=d.get("strokeOpacity");c.strokeWeight=d.get("strokeWeight");null==c.zIndex&&(c.zIndex=a.T());delete c.path;delete c.map;var e=new _.hj(c);e.bindTo("map",a);c.strokeOpacity=d.get("ghostStrokeOpacity");d=new _.iM;d.setValues(c);d.set("anchors",[]);d.bindTo("map",a);var f=null;a.o&&(f={},_.Ud(f,b),f.zIndex=c.zIndex,f.paths=new _.jh([e.getPath()]),delete f.map,f=new _.gj(f));
a.i={Nd:e,Fj:f,sd:d};x7(a)},v7=function(a){var b=a.get("map"),c=a.i.Nd;c.unbind("map");var d=a.i.Fj;a.i.sd.unbind("map");a.i.sd.set("map",null);a.i=null;a.set("draggableCursor",a.j);if(c.getPath().getLength()){if(a.o){c.set("map",null);d.set("map",b);var e={type:"polygon",overlay:d};_.L.trigger(a,"overlaycomplete",e);_.L.trigger(a,"polygoncomplete",d)}else e={type:"polyline",overlay:c},_.L.trigger(a,"overlaycomplete",e),_.L.trigger(a,"polylinecomplete",c);_.og(b,"DMpol");x7(a)}else c.set("map",null)},
x7=function(a){a.set("enablePanning",!!a.i&&a.get("drawPolysWithDrag")&&!a.get("panWhileDrawing"))},z7=function(){},lja=function(){var a=0;return function(){return a++}},A7=function(){var a=this.j=mja(this);this.Ba=nja(this);var b="url("+_.Wo+"crosshair.cur)";_.Bj.o&&(b+=" 7 7");b+=", crosshair";var c=lja();this.T=6+(_.qo()?9:0);this.o={circle:new l7(new p7,b,c),marker:new q7(b),polygon:new s7(!0,b,c,this.T),polyline:new s7(!1,b,c,this.T),rectangle:new l7(new z7,b,c)};b=oja(this);for(var d in this.o)c=
this.o[d],c.bindTo("map",this),c.bindTo("panWhileDrawing",this),c.bindTo("draggingCursor",a),c.bindTo("draggableCursor",b),c.bindTo("enablePanning",a,"panAtEdge"),c.bindTo("options",this,d+"Options"),_.L.forward(c,"overlaycomplete",this),_.L.forward(c,d+"complete",this);this.o.polygon.bindTo("drawPolysWithDrag",this);this.o.polyline.bindTo("drawPolysWithDrag",this);this.i=null;this.Na=[];this.H=this.W=null;this.va=0;this.ua=this.$=null;this.ka=this.ta=void 0},mja=function(a){var b="click dblclick movestart move moveend panbynow mousewheel mousemove".split(" "),
c=new _.$L(b),d=!1;_.A(b,function(e){_.L.addListener(c,e,function(f,g){var h=f instanceof _.jp,k=h?f.Ra:f;if("click"==e||"dblclick"==e||"mousemove"==e)h?("click"==e&&_.op(f),"dblclick"==e&&_.op(f),"mousemove"==e&&_.mp(f)):_.bf(f);if("mousewheel"!=e&&(!d||"mousemove"!=e)){if("mousemove"==e||"move"==e)a.$=e,a.ua=k,a.ta=g;if(d||!a.get("panWhileDrawing"))"movestart"==e&&(d=!0),"moveend"==e&&(d=!1),f=_.pn(),"panbynow"==e?a.$&&B7(a,a.$,a.ua,f,a.ta):B7(a,e,k,f,g)}})});return c},nja=function(a){var b=new _.mK(["map",
"drawingMode","pegmanDragging"],"active",function(c,d,e){return!!c&&!!d&&!e});b.bindTo("map",a);b.bindTo("drawingMode",a);a.j.bindTo("active",b);return b},oja=function(a){var b=new _.mK(["draggableCursor","panWhileDrawing"],"cursor",function(c,d){return d?null:c});b.bindTo("panWhileDrawing",a);a.j.bindTo("draggableCursor",b,"cursor");return b},B7=function(a,b,c,d,e){var f=a.get("map");if(a.i){var g=f.__gm.get("projectionController"),h=f.__gm.get("panes");if(g&&h&&(g=e||c,a.ka&&g)){e=a.ka.Cc(g);f=
_.Mn(e,f.getProjection());g=new _.N(g.clientX,g.clientY);(h=(h=a.get("snappingCallback"))&&h(a.i.jh(f,e)))&&(f=h);h=!1;if("click"==b){if(300>=d-a.va&&a.H&&_.Yd(a.H.x,g.x,a.T)&&_.Yd(a.H.y,g.y,a.T))return;a.H=g;a.va=d;h=a.i.Tf(f,e)}else"dblclick"==b?h=a.i.dj():"mousemove"==b?h=a.i.Tg(f,e):"movestart"==b?h=a.i.Wg(f,e):"move"==b?h=a.i.Ug(f,e):"moveend"==b&&(h=a.i.Vg(f,e));h&&c&&_.bf(c)}}},C7=function(a){var b=this;this.Ka=new _.wi(function(){b.i&&(b.o.Yc(b.i),_.Ji(b.i),b.i=null,b.j.unbindAll(),b.j=null);
b.o=b.get("layoutManager");if(b.o&&0!=b.get("drawingControl")){var d=b.get("drawingControlOptions")||{},e=d.drawingModes||pja,f=document.createElement("div");_.Uz(f);f.style.margin=_.Q(5);_.lo(f,10);b.i=f;b.j=new j7(b.i,e);b.j.bindTo("drawingMode",b);b.o.addElement(b.i,d.position||1,!1,.25)}},0);var c=new A7;c.bindTo("map",a);c.bindTo("drawingMode",a);c.bindTo("panWhileDrawing",a);c.bindTo("markerOptions",a);c.bindTo("polygonOptions",a);c.bindTo("polylineOptions",a);c.bindTo("rectangleOptions",a);
c.bindTo("circleOptions",a);c.bindTo("drawPolysWithDrag",a);_.L.forward(c,"overlaycomplete",a);_.L.forward(c,"circlecomplete",a);_.L.forward(c,"markercomplete",a);_.L.forward(c,"polygoncomplete",a);_.L.forward(c,"polylinecomplete",a);_.L.forward(c,"rectanglecomplete",a);this.bindTo("map",a);this.bindTo("drawingControl",a);this.bindTo("drawingControlOptions",a);this.bindTo("drawingMode",a);this.set("snappingCallback",a.get("snappingCallback"));a.bindTo("snappingCallback",this);c.bindTo("snappingCallback",
this);_.og(a.get("map"),"DMnew")},D7=function(a){switch(a){case null:return null;case "Point":return"marker";case "LineString":return"polyline";case "Polygon":return"polygon";default:return null}};_.Aa(j7,_.M);var kja={marker:"Add a marker",polygon:"Draw a shape",polyline:"Draw a line",rectangle:"Draw a rectangle",circle:"Draw a circle"},i7=new _.ig(16,16),jja={hand:144,marker:112,polygon:96,polyline:128,rectangle:48,circle:0},ija={hand:80,marker:176,polygon:64,polyline:32,rectangle:16,circle:160};_.z(k7,_.M);h7=k7.prototype;h7.Tf=function(){return!1};h7.dj=function(){return!1};h7.Tg=function(){return!1};h7.Wg=function(){return!1};h7.Ug=function(){return!1};h7.Vg=function(){return!1};_.z(l7,k7);h7=l7.prototype;h7.jh=function(a,b){m7(this);n7(this,a,b);return{latLng:a,overlay:this.i}};h7.active_changed=function(){if(this.get("active"))this.set("draggableCursor",this.W),this.set("draggingCursor","");else{var a=this.i;a&&(a.unbind("map"),a.set("map",null),this.i=null);this.o=this.j=null;this.H=!1}};h7.Tf=function(a,b){this.j?o7(this,a,b):(m7(this),this.j=a,this.o=b,n7(this,a,b),this.H=!0);return!1};h7.Tg=function(a,b){n7(this,a,b);return!1};
h7.Wg=function(a,b){if(this.H)return!1;this.set("draggingCursor",this.W);this.set("enablePanning",!0);m7(this);this.j=a;this.o=b;n7(this,a,b);return!0};h7.Ug=function(a,b){if(this.H)return!1;n7(this,a,b);return!0};h7.Vg=function(a,b){if(this.H)return!1;this.set("draggingCursor","");this.set("enablePanning",!1);o7(this,a,b);return!0};p7.prototype.j=function(a){return new _.ej(a)};p7.prototype.i=function(a,b,c){a.set("center",b);var d=0,e=a.get("map");e&&c&&(d=e.__gm.get("baseMapType"),d=_.Qy(b,c,d&&d.radius));a.set("radius",d)};p7.prototype.H=function(){return"circle"};p7.prototype.o=function(){return"circlecomplete"};_.z(q7,k7);q7.prototype.jh=function(a){r7(this);this.i.setPosition(a);return{latLng:a,overlay:this.i}};q7.prototype.active_changed=function(){this.get("active")&&this.set("draggableCursor",this.j)};q7.prototype.Tf=function(a){var b=this.get("map");r7(this);this.i.setPosition(a);this.i.setMap(b);_.L.trigger(this,"overlaycomplete",{type:"marker",overlay:this.i});_.L.trigger(this,"markercomplete",this.i);_.og(b,"DMmar");this.i=null;return!1};_.z(s7,k7);h7=s7.prototype;h7.jh=function(a){this.i&&this.i.Nd||y7(this);return{latLng:a,overlay:this.i.Fj||this.i.Nd}};h7.active_changed=function(){this.get("active")?this.set("draggableCursor",this.j):this.i&&this.i.Nd&&v7(this)};h7.Tf=function(a){if(!a)return!1;this.i?w7(this,a):(y7(this),t7(this,a));return!1};h7.dj=function(){this.i&&1<this.i.Nd.getPath().getLength()&&v7(this);return!1};
h7.Tg=function(a){var b=a;this.i&&a&&(a=u7(this,a),this.set("draggableCursor",a?"pointer":this.j),a&&(b=a.latLng),this.i.sd.set("freeVertexPosition",b));return!1};h7.Wg=function(a){return a?this.get("drawPolysWithDrag")?(this.i||y7(this),this.i.Nd.getPath().getLength()||t7(this,a),this.set("draggingCursor",this.j),!0):!1:!1};h7.Ug=function(a){return this.i&&this.get("drawPolysWithDrag")?(this.i.sd.set("freeVertexPosition",a),!0):!1};
h7.Vg=function(a){return a?this.get("drawPolysWithDrag")?(this.i&&(w7(this,a),this.set("draggingCursor","")),this.i&&this.i.sd.set("freeVertexPosition",null),!0):!1:!1};h7.drawPolysWithDrag_changed=s7.prototype.panWhileDrawing_changed=function(){x7(this)};z7.prototype.j=function(a){return new _.ij(a)};z7.prototype.i=function(a,b,c,d){c=c||b;d=void 0===d?!1:d;var e=c.lat(),f=b.lat();b.lat()<c.lat()&&(e=b.lat(),f=c.lat());var g=b.lng(),h=c.lng();d&&(g=c.lng(),h=b.lng());b=_.Sf(e,g,f,h);a.set("bounds",b)};z7.prototype.H=function(){return"rectangle"};z7.prototype.o=function(){return"rectanglecomplete"};_.z(A7,_.M);A7.prototype.map_changed=function(){var a=this,b=this.get("map"),c=this.Ba,d=this.j;if(b){var e=b.__gm;e.j.then(function(f){a.ka=f.mb});this.bindTo("mouseEventTarget",e);c.bindTo("pegmanDragging",e);d.bindTo("draggable",b);d.bindTo("scrollwheel",b);this.W=_.L.forward(d,"panbynow",e)}else this.unbind("mouseEventTarget"),this.set("mouseEventTarget",null),c.unbind("pegmanDragging"),d.unbind("draggable"),d.unbind("scrollwheel"),this.W&&(_.L.removeListener(this.W),this.W=null)};
A7.prototype.mouseEventTarget_changed=function(){var a=["panes","pixelBounds"],b=this.j;_.A(a,b.unbind,b);b=this.Na;_.A(b,_.L.removeListener);b.length=0;if(this.get("mouseEventTarget")){b=this.j;var c=this.get("map");_.Bz(b,a,c.__gm)}};A7.prototype.drawingMode_changed=function(){this.i&&this.i.set("active",!1);this.j.set("panAtEdge",!1);var a=this.get("drawingMode");(this.i=this.o[a])&&this.i.set("active",!0)};_.z(C7,_.M);C7.prototype.map_changed=function(){var a=this.get("map");a?(a=a.__gm,this.bindTo("layoutManager",a),a.set("snappingCallback",this.get("snappingCallback")),this.bindTo("snappingCallback",a)):(this.unbind("layoutManager"),this.set("layoutManager",null),this.unbind("snappingCallback"))};C7.prototype.layoutManager_changed=function(){_.xi(this.Ka)};C7.prototype.drawingControl_changed=function(){_.xi(this.Ka)};C7.prototype.drawingControlOptions_changed=function(){_.xi(this.Ka)};
var pja=["marker","polyline","rectangle","circle","polygon"];_.Ye("drawing_impl",{mk:C7,em:function(a){var b=new _.M,c=new _.mK(["dataDrawingMode"],"drawingManagerMode",D7);c.bindTo("dataDrawingMode",a,"drawingMode");var d=new _.mK(["styleOrStylingFunction"],"style",function(g){return"function"===typeof g?g(new _.kf):g});d.bindTo("styleOrStylingFunction",a,"style");var e=new _.mK(["controls","controlPosition"],"drawingControlOptions",function(g,h){return{drawingModes:_.Zd(g,D7),position:h}});e.bindTo("controls",a);e.bindTo("controlPosition",a);var f=new _.mK(["controls"],
"drawingControl",function(g){return!!g});f.bindTo("controls",a);b.bindTo("map",a);b.bindTo("drawingMode",c,"drawingManagerMode");b.bindTo("markerOptions",d,"style");b.bindTo("polylineOptions",d,"style");b.bindTo("polygonOptions",d,"style");b.bindTo("drawingControlOptions",e);b.bindTo("drawingControl",f);_.L.addListener(b,"overlaycomplete",function(g){g=g.overlay;var h=_.NK([g]),k=a.get("featureFactory");h=k?k(h):new _.kf({geometry:h});a.add(h);g.set("map",null)});new C7(b);_.L.hb(a,"map_changed",
function(){var g=a.get("map");g&&_.og(g,"Le")})}});});
